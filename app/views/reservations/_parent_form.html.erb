<div class="persisted-data"
    data-validate-url="<%= validate_reservations_path %>">
</div>

<div class="card-body">
  <div class="reservation-form-errors-<%= lodging.id %>">
    <%= render 'reservations/errors', resource: reservation %>
    <br>
  </div>

  <div class="row">
    <div class="col-md-6" data-lodging-id="<%= lodging.id %>"
         data-disabled-dates="<%= lodging.children_not_available_on %>"
         data-customized-dates="<%= lodging.customized_dates %>">
      <label class="mb-0 text-xs">Dates</label>
      <div id="vue-app">
        <reservation-datepicker
        :check-in="'<%= params[:check_in]%>'"
        :check-out="'<%= params[:check_out]%>'"
        :check-in-title="'<%= t('search.check_in') %>'"
        :check-out-title="'<%= t('search.check_out') %>'"
        :months="1"
        :lodging-id="<%= lodging.id %>"
        :disabled-dates="<%= lodging.not_available_on %>"
        :customized-dates="<%= lodging.customized_dates %>"
        :url="'<%= price_details_lodging_path(lodging) %>'" />
      </div>
    </div>

    <div class="col-md-6">
      <label class="mb-0 text-xs">Guests</label>
      <div class="dropdown guests-dropdown" id="dropdown<%= id_sufix %>">
        <button class="btn btn-outline-primary w-100 dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <span class="title">Guest</span>
        </button>

        <%= form_for reservation, url: reservations_path, remote: true, html: {id: "new_reservation#{id_sufix}"} do |f| %>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <div class="dropdown-item">
              <label>Adults</label>
              <%= f.number_field "adults#{id_sufix}", value: no_of_adults(params[:adults] || f.object.adults), min: 1, class: 'input-spinner parent-adults adults' %>
            </div>

            <div class="dropdown-item">
              <label>Children</label>
              <%= f.number_field "children#{id_sufix}", value: (params[:children] || f.object.children), min: 0, class: 'input-spinner parent-children children' %>
            </div>

            <div class="dropdown-item">
              <label>Infants</label>
              <%= f.number_field "infants#{id_sufix}", value: (params[:infants] || f.object.infants), min: 0, class: 'input-spinner parent-infants infants' %>
            </div>

            <%= f.hidden_field "lodging_id#{id_sufix}", value: lodging.id %>
          </div>
        <% end %>
        <%= link_to 'Check Availability', '', class: "btn btn-outline-primary btn-calculate-bill w-100", data: { lodging_ids: lodging.lodging_children.try(:ids) } %>
        <%= render 'shared/alert', title: 'Important:', type: 'info', description: t('prices_not_confirmed') unless lodging.confirmed_price %>
        
      </div>
      
      <p class="text-xxs"><%= image_tag("icon_calendar_free",  class: 'img-small') %> Available
      <%= image_tag("icon_calendar_free",  class: 'img-small') %> Not available
      <%= image_tag("icon_calendar_free",  class: 'img-small') %> Under option 
      <%= image_tag("icon_calendar_free",  class: 'img-small') %> Special offer </p>
      <div class="bg-white">
        <%= render 'shared/alert', title: 'Important:', description: t('not_live_parent'), type: 'info' unless lodging.checked? %>
      </div>
    </div>

    
  </div>
  <h5 class="margin-top-3x">
                  Beschikbaar bij <%= @lodging.name %>
  </h5>
  <%= render partial: 'reservations/child_form_table', collection: @lodging_children, as: :lodging %>
  <%= render partial: 'child_details_modal', collection: @lodging_children, as: :lodging  %>
    
</div>
