<%= render 'shared/photoswipe' %>

<div class="row no-gutters">
  
  <div class="col-md-6 col-sm-12 col-lg-8">
    <div class="row target-section" id="home-container">
      <div class="col-md-12 col-xs-12">
        <div class="gallery-control">
          <figure itemprop="associatedMedia" itemscope>
            <a itemprop="contentUrl">
              <img src="<%= @lodging.image %>" itemprop="thumbnail" alt="<%= @lodging.name %>" class="w-100 max-image" />
            </a>

            <figcaption itemprop="caption description">
              <input type="button" name="view-photos" value="view photos" class="btn btn-white btn-sm">
            </figcaption>
          </figure>
        </div>

        <div class="lodging-gallery margin-top-1x" itemscope>
          <% @lodging.images.each_with_index do |image_url, index| %>
            <figure itemprop="associatedMedia" itemscope class="d-none">
              <a href="<%= image_url %>" itemprop="contentUrl">
                <img src="<%= image_url %>" itemprop="thumbnail" alt="<%= @lodging.name %>" class="img-fluid img-thumbnail" />
              </a>
              <figcaption itemprop="caption description"><%= index %></figcaption>
            </figure>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6 col-sm-12 col-lg-4 margin-bottom-1x homepage gallery-banner">
    <div class="col-12-md px-5">
      <h5 class="margin-top-1x "><%= @lodging.country.name.try(:capitalize)  %> - <%= @lodging.region.name.try(:capitalize)  %></h5>
      <h2 class="margin-top-1x"><%= @lodging.h1 %></h2>

      <h5 class="mt-lg-5">
        <i class="material-icons md-24 stars text-white"></i>&nbsp;
        <%= @lodging.highlight_1 %><br>
        <i class="material-icons md-24 stars text-white"></i>&nbsp;
        <%= @lodging.highlight_2 %><br>
        <i class="material-icons md-24 stars text-white"></i>&nbsp;
        <%= @lodging.highlight_3 %>
      </h5>

      <br/>

      <input type="button" name="view-more-info" value="Check availabilty and pricing" class="btn btn-outline-primary w-100 text-gray-dark btn standalone-modal-btn">
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="col-md-12">
    <div class="row margin-top-1x">
      <div class="col-sm-12 col-md-12 col-lg-12 margin-bottom-1x">
        <h4 class="margin-bottom-1x"><%= @lodging.h2 %></h4>

         
        <%= image_tag("guest.png") %>
        <%= @lodging.minimum_adults %> - <%= pluralize @lodging.adults, t('search.guest'), t('search.guests') %>
        <%= image_tag("bedroom.png") %>
        <%= pluralize @lodging.beds, t('search.bedroom'), t('search.bedrooms') %>
        <%= image_tag("bathroom.png") %>
        <%= pluralize @lodging.baths, t('search.bathroom'), t('search.bathrooms') %>
        <% if @reviews.present? %>
          <div class="d-inline align-baseline text-sm text-warning mr-auto pt-2  px-3">
            <%= render_stars_tag @lodging.average_rating %>
            (<%= pluralize(@lodging.all_reviews.count, 'review', 'reviews') %>)
          </div>

        <% end %>

        </div>
          

        <div id="lodging-summary">
          <%= @lodging.summary.try(:html_safe) %>
        </div>
      </div>
    </div>

    <div id="infobox" class="row">
      <div class="col-md-12 ">
        <div class="infobox">
          <div class="infobox-header bg-secondary">
            <h4>Beschikbaardeid & Prijzen</h4>

            <h5>
              Wanneer wil jij verblijven bij <%= @lodging.name %>?
            </h5>
          </div>

          <div class="infobox-content">
            <% if @lodging.as_standalone? %>
              <%= render 'standalone', lodging: @lodging, reservation: @reservation %>
            <% else %>
              <%= render 'parent', lodging: @lodging, reservation: @reservation, lodging_children: @lodging_children %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <div id ="questions" class="row">
      <div class="col-md-12 margin-bottom-1x">
        <div class="infobox">
          <div class="infobox-header bg-secondary">
            <h4 class="mb-3">
              Inclusief, optioneel & voorwaarden
            </h4>
          </div>

          <div class="infobox-content">
            <div class="row">
              <div class="col-md-6">
                <div class="col-md-12">
                  <p class="margin-top-1x">
                    <%= t 'usp.vragen_show_header' %> <%= @lodging.name %> ?
                  </p>
                  <p><%= t 'email.contact_text' %></p>
                </div>
              </div>

              <div class="col-md-6">
                <div class="accordion" id="accordion2" role="tablist">
                  <div class="card-header" role="tab">
                    <h6>
                      <a href="#collapseFour" data-toggle="collapse">
                        <i class="material-icons check_circle"></i>
                        <%= t 'information.included_header' %>
                      </a>
                    </h6>
                  </div>

                  <div class="collapse" id="collapseFour" data-parent="#accordion2" role="tabpanel">
                    <div class="card-body">
                      <%= @lodging.including_text.try(:html_safe) %>
                    </div>
                  </div>

                  <div class="card-header" role="tab">
                    <h6>
                      <a class="collapsed" href="#collapseFive" data-toggle="collapse">
                        <i class="material-icons assignment"></i>
                        <%= t 'information.informatie_header' %>
                      </a>
                    </h6>
                  </div>

                  <div class="collapse" id="collapseFive" data-parent="#accordion2" role="tabpanel">
                    <div class="card-body">
                      <%= @lodging.particularities_text.try(:html_safe) %>
                    </div>
                  </div>

                  <div class="card-header" role="tab">
                    <h6>
                      <a class="collapsed" href="#collapseSeven" data-toggle="collapse">
                        <i class="material-icons room_service"></i>
                        <%= t 'information.extra_service' %>
                      </a>
                    </h6>
                  </div>

                  <div class="collapse" id="collapseSeven" data-parent="#accordion2" role="tabpanel">
                    <div class="card-body">
                      <%= @lodging.options_text.try(:html_safe) %>
                    </div>
                  </div>

                  <div class="card-header" role="tab">
                    <h6>
                      <a class="collapsed" href="#collapseSix" data-toggle="collapse">
                        <i class="material-icons monetization_on"></i>
                        <%= t 'information.payment_conditions' %>
                      </a>
                    </h6>
                  </div>

                  <div class="collapse" id="collapseSix" data-parent="#accordion2" role="tabpanel">
                    <div class="card-body">
                      <%= @lodging.payment_terms_text.try(:html_safe) %>
                    </div>
                  </div>


                  <div class="card-header" role="tab">
                    <h6>
                      <a class="collapsed" href="#collapseTen" data-toggle="collapse">
                       <i class="material-icons monetization_on"></i>
                        <%= t 'information.deposit' %>
                      </a>
                    </h6>
                  </div>

                  <div class="collapse" id="collapseTen" data-parent="#accordion2" role="tabpanel">
                    <div class="card-body">
                      <%= @lodging.deposit_text.try(:html_safe) %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%= render 'shared_content', lodging: @lodging %>
  </div>
</div>

<%= render 'shared/meta_tags', resource: @lodging %>

<% content_for :canonical do %><%= lodging_url(@lodging) %><% end %>

<%= content_for :js_init do %>
  GuestDropdown.init();
  Lodging.read_more()
  initPhotoSwipeFromDOM('.lodging-gallery');
  initDatePicker();
  Invoice.init();
  Lodging.child_form();
  Lodging.highlight_menu();
  OwlCarousel.init();
  Map.init_with('<%= @lodging.to_json(methods: [:feature], only: []) %>', 'lodging-map-location');
  Invoice.calculate(<%= calculation_ids @lodging %>);
<% end %>
