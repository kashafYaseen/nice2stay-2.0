<%= form_tag lodgings_path, method: :get, class: 'lodgings-filters form-inline', data: { check_in: params[:check_in], check_out: params[:check_out] }, remote: true do %>

  <div class="row">
    <div class='col-md-2'>
      <div class="d-flex flex-wrap-reverse flex-md-nowrap justify-content-center justify-content-sm-between align-items-center mb-30">
        <div class="pt-3 pb-1 pb-sm-3 text-sm text-center text-sm-left">
          <span class="text-muted mr-2 lodgings-heading">
            <%= page_entries_info(@lodgings, entry_name: 'Lodging' ) %>
          </span>
        </div>
      </div>
    </div>

    <div class="dropdown col-md-2">
      <button class="btn btn-outline-secondary" dropdown-toggle" type="button" id="PriceSortFilter" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Sort By
      </button>

      <div class="dropdown-menu" aria-labelledby="PriceSortFilter">
        <a class="dropdown-item lowest-price" href="#">Lowest Price</a>
        <a class="dropdown-item highest-price" href="#">Highest Price</a>
        <%= hidden_field_tag :order, params[:order] %>
      </div>
    </div>

    <div class='col-md-2'>
      <div class='datepicker'></div>
      <ul>
        <div id='datepicker'></div>
      </ul>
    </div>

    <div class="dropdown guests-dropdown col-md-2">
      <button class="btn btn-outline-primary dropdown-toggle btn-sm" type="button" id="dropdownMenuButton1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="title">Guest</span>
      </button>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
        <div class="dropdown-item">
          <label>Adults</label>
          <%= number_field_tag :adults, params[:adults], min: 0 %>
        </div>

        <div class="dropdown-item">
          <label>Children</label>
          <%= number_field_tag :children, params[:children], min: 0 %>
        </div>

        <div class="dropdown-item">
          <label>Infants</label>
          <%= number_field_tag :infants, params[:infants], min: 0 %>
        </div>

        <div class="dropdown-item">
          <%= submit_tag 'Done', class: 'btn btn-sm btn-secondary submit-filters float-right' %>
        </div>
      </div>
    </div>

    <div class="dropdown types-dropdown col-md-2">
      <button class="btn btn-outline-primary dropdown-toggle btn-sm" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="title">Accommodation Type</span>
      </button>

      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <% Lodging.lodging_types.each do |key, value| %>
          <div class="dropdown-item">
            <label>
              <%= check_box_tag "lodging_type_in[]", key, is_checked?(key), id: "lodging_type_#{key}", class: "lodging_type" %>
              <span><%= key %> (<%= count_lodging_type(lodgings, key) %>)</span>
            </label>
          </div>
        <% end %>
      </div>
    </div>

    <div class="price-range-slider col-md-2" method="post" data-start-min="<%= render_min_price params[:min_price] %>" data-start-max="<%= render_max_price params[:max_price] %>" data-min="0" data-max="1200" data-step="1">
      <div class="ui-range-slider"></div>
      <div class="ui-range-values pull-right">
        <div class="ui-range-value-min">$<span></span>
          <%= hidden_field_tag :min_price, render_min_price(params[:min_price]) %>
        </div>&nbsp;-&nbsp;

        <div class="ui-range-value-max">$<span></span>
          <%= hidden_field_tag :max_price, render_max_price(params[:max_price]) %>
        </div>
      </div>
    </div>
  </div>
  <%= hidden_field_tag :bounds, params[:bounds] %>
<% end %>
